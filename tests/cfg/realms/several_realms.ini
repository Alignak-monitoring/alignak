[DEFAULT]
_dist_BIN=./cfg/daemons/bin
_dist_ETC=./cfg/daemons/etc
_dist_VAR=./cfg/daemons/lib
_dist_RUN=./cfg/daemons/run
_dist_LOG=./cfg/daemons/log

#-- Generic configuration name
name=Alignak global configuration

#-- Username and group to run (defaults to current user)
;user=alignak
;group=alignak

# Disabling security means allowing the daemons to run under root account
# set to 1 to allow daemons running as root
idontcareaboutsecurity=0


#-- Path Configuration
# paths variables values, if not absolute paths, they are relative to workdir.
# using default values for following config variables value:
workdir=%(_dist_RUN)s
logdir=%(_dist_LOG)s
vardir=%(_dist_VAR)s
rundir=%(_dist_RUN)s
etcdir=%(_dist_ETC)s

#-- Set to 0 if you want to make the daemon NOT run
;daemon_enabled=1

#-- Set to 0 to make the daemon run foreground (else daemonize mode)
;is_daemon=1
is_daemon=0

#-- Set to 1 if you want to replace a running daemon
;do_replace=1

#-- SSL configuration --
use_ssl=0
hard_ssl_name_check=0
# Paths for certificates files
ca_cert=%(etcdir)s/certs/ca.pem
server_cert=%(etcdir)s/certs/server.crt
server_key=%(etcdir)s/certs/server.key
server_dh=%(etcdir)s/certs/server.pem

#-- Debugging daemons
;debug=true
;debug_file=%(LOG)s/%(NAME)s-debug.log

#-- Network configuration
# host=0.0.0.0
port=10000

#-- pid file
# The daemon will chdir into the workdir directory when launched
# and it will create its pid file in this working dir
pid_filename=%(workdir)s/%(NAME)s.pid

#-- Local log management --
# Enabled by default to ease troubleshooting
#use_local_log=1
#local_log=%(logdir)s/%(NAME)s.log
# Log with a formatted human date
#human_timestamp_log=1
#human_date_format=%Y-%m-%d %H:%M:%S %Z
# Rotate log file every day, keeping 7 files
#log_rotation_when=midnight
#log_rotation_interval=1
#log_rotation_count=7
# accepted log level values= DEBUG,INFO,WARNING,ERROR,CRITICAL
#log_level=INFO

#-- External modules watchdog --
# If a module got a brok queue() higher than this value, it will be
# killed and restart. Put to 0 to disable it
max_queue_size=0

# --------------------------------------------
# We also define the global Alignak parameters in this default section. As of it, all the
# daemons will get thos parameters made availablz
# --------------------------------------------
# Alignak instance name
# This information is useful to get/store alignak global configuration in the Alignak backend
# If you share the same backend between several Alignak instances, each instance must have its own
# name. The default is to use the arbiter name as Alignak instance name.
# Else, you can uncomment this declaration and define your own Alignak instance name in this property
# alignak_name=my_alignak


# Notifications configuration
# ---
# Notifications are enabled/disabled
enable_notifications=1

# After a short_timeout, launched plugins are killed
notification_timeout=30


# Retention configuration
# ---
# Number of minutes between 2 retention save, default is 60 minutes
# This is only used if retention is enabled
# todo: move this parameter to the retention aware modules?
retention_update_interval=0


# Active checks configuration
# ---
# Active host/service checks are enabled/disabled
execute_host_checks=1
execute_service_checks=1

# Max plugin output for the plugins launched by the pollers, in bytes
#max_plugins_output_length=8192
max_plugins_output_length=65536

# After a short_timeout, launched plugins are killed
# and the host state is set to a default value (2 for DOWN)
# and the service state is set to a default value (2 for CRITICAL)
#host_check_timeout=30
#service_check_timeout=60
#timeout_exit_status=2


# Passive checks configuration
# ---
# Passive host/service checks are enabled/disabled
accept_passive_host_checks=1
accept_passive_service_checks=1

# As default, passive host checks are HARD states
#passive_host_checks_are_soft=0

# Freshness check
# Default is enabled for hosts and services
#check_host_freshness=1
#check_service_freshness=1
# Default is 60 for hosts and services
#host_freshness_check_interval=60
#service_freshness_check_interval=60
# Extra time for freshness check ...
#additional_freshness_latency=15


# Checks scheduler configuration
# ---
# Interval length and re-scheduling configuration
# Do not change those values unless you are really sure to master what you are doing...
# todo: confirm the real interest of those configuration parameters!
#interval_length=60
#auto_reschedule_checks=1
#auto_rescheduling_interval=1
#auto_rescheduling_window=180

# Number of interval to spread the first checks for hosts and services
# Default is 30
#max_service_check_spread=30
max_service_check_spread=5
# Default is 30
#max_host_check_spread=30
max_host_check_spread=5


# Flapping detection configuration
# ---
# Default is enabled
#enable_flap_detection=1

# Flapping threshold for hosts and services
#low_service_flap_threshold=20
#high_service_flap_threshold=30
#low_host_flap_threshold=20
#high_host_flap_threshold=30

# flap_history is the lengh of history states we keep to look for flapping.
# 20 by default, can be useful to increase it. Each flap_history increases cost:
#    flap_history cost = 4Bytes * flap_history * (nb hosts + nb services)
# Example: 4 * 20 * (1000+10000) ~ 900Ko for a quite big conf. So, go for it!
#flap_history=20


# Performance data configuration
# ---
# Performance data management is enabled/disabled
#process_performance_data=1
# Commands for performance data
#host_perfdata_command=
#service_perfdata_command=


# Event handlers configuration
# ---
# Event handlers are enabled/disabled
#enable_event_handlers=1

# By default don't launch even handlers during downtime. Put 0 to
# get back the default nagios behavior
no_event_handlers_during_downtimes=1

# Global host/service event handlers
#global_host_event_handler=
#global_service_event_handler=

# After a short_timeout, launched plugins are killed
#event_handler_timeout=30


# External commands configuration
# ---
# External commands are enabled/disabled
# check_external_commands=1


# Impacts configuration
# ---
# Enable or not the state change on impact detection (like a host going unreachable
# if a parent is DOWN for example). It's for services and hosts.
# Note: defaults to 0 for Nagios old behavior compatibility
#enable_problem_impacts_states_change=0
enable_problem_impacts_states_change=1


# if 1, disable all notice and warning messages at
# configuration checking when arbiter checks the configuration.
# Default is to log the notices and warnings
#disable_old_nagios_parameters_whining=0
disable_old_nagios_parameters_whining=1


# Environment macros configuration
# ---
# Disabling environment macros is good for performance. If you really need it, enable it.
#enable_environment_macros=1
enable_environment_macros=0


# Monitoring log configuration
# ---
# Note that alerts and downtimes are always logged
# ---
# Notifications
# log_notifications=1
log_notifications=1

# Services retries
log_service_retries=1

# Hosts retries
log_host_retries=1

# Event handlers
log_event_handlers=1

# Flappings
log_flappings=1

# Snapshots
log_snapshots=1

# External commands
log_external_commands=1

# Active checks
log_active_checks=0

# Passive checks
log_passive_checks=0

# Initial states
log_initial_states=1


# If you need to set a specific timezone to your deamons, uncomment it
#use_timezone=Europe/Paris


# --------------------------------------------------------------------
# Arbiter daemons part, when the arbiter starts some daemons by itself
# This may happen if some hosts are defined in a realm that do not
# have all its daemons defined
# --------------------------------------------------------------------
# Daemons arguments
#daemons_arguments=
# Daemons log file
daemons_log_folder=/tmp/log/alignak
# Default is to allocate a port number incrementally starting from the value defined here
daemons_initial_port=7800


# Export all alignak inner performances into a statsd server.
# By default at localhost:8125 (UDP) with the alignak prefix
# Default is not enabled
statsd_host = localhost
statsd_port = 8125
statsd_prefix = alignak
statsd_enabled = 0



[alignak-configuration]
# Alignak main configuration file
# -----
# For the unit tests, do not set any configuration file because it is declare in the tests...
# -----
;CFG=%(etcdir)s/alignak.cfg
# Alignak secondary configuration file (none as a default)
;CFG2=


# For each Alignak daemon, this file contains a section with the daemon name. The section
# identifier is the corresponding daemon name prefixed with the keyword daemon and a dot.
# This daemon name is usually built with the daemon type (eg. arbiter, poller,...) and the
# daemon name separated with a dash.
#
#Â The previous rules ensure that Alignak will be able to find all the daemons configuration
# in this file whatever the number of daemons existing in the configuration
#
# To be easily used as a configuration variable of this file, the daemon name is repeated
# inside the section in a NAME variable.
#
# Each section inherits from the [DEFAULT] section and only defines the specific values
# inherent to the declared daemon.

[daemon.arbiter-master]
type=arbiter
name=arbiter-master

#-- Network configuration
port=7770

[daemon.scheduler-1]
type=scheduler
name=Scheduler-1

#-- Network configuration
port=7768

realm=realm1

# Define a scheduler for another realm, but no broker for this realm
[daemon.scheduler-2]
type=scheduler
name=Scheduler-2

#-- Network configuration
port=17768

realm=realm2

[daemon.poller-1]
type=poller
name=Poller-1

#-- Network configuration
port=7771

realm=realm1

[daemon.poller-2]
type=poller
name=Poller-2

#-- Network configuration
port=7771

realm=realm2

[daemon.reactionner-master]
type=reactionner
name=reactionner-master

#-- Network configuration
port=7769

[daemon.broker-1]
type=broker
name=Broker-1

#-- Network configuration
port=7772

#-- External modules watchdog --
# The broker daemon has a huge queue size.
max_queue_size=100000

realm=realm1

[daemon.broker-2]
type=broker
name=Broker-2

#-- Network configuration
port=7772

#-- External modules watchdog --
# The broker daemon has a huge queue size.
max_queue_size=100000

realm=realm2

[daemon.receiver-master]
### RECEIVER PART ###
type=receiver
name=receiver-master

#-- Network configuration
port=7773
